<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="$langISO">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BazAds: RFC</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
  <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">BazAds<span id="projectnumber">&#160;main</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">RFC </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_src_main_java_protocol_rfc"></a> </p>
<h1><a class="anchor" id="introduction_rfc"></a>
1. Introduction and table of contents</h1>
<p >This document specifies the protocol used in the project BazAds.</p>
<ol type="1">
<li><a class="el" href="rfc_top.html#introduction_rfc">Introduction and table of contents</a></li>
<li><a class="el" href="rfc_top.html#request_from_client_to_server">Request from clients to the central server</a><ol type="a">
<li><a class="el" href="rfc_top.html#get_server_public_key">Get the public key of the central server</a></li>
<li><a class="el" href="rfc_top.html#sign_up">Sign up</a></li>
<li><a class="el" href="rfc_top.html#sign_in">Sign in</a></li>
<li><a class="el" href="rfc_top.html#sign_out">Sign out</a></li>
<li><a class="el" href="rfc_top.html#create_sale">Create a sale</a></li>
<li><a class="el" href="rfc_top.html#update_sale">Update a sale</a></li>
<li><a class="el" href="rfc_top.html#delete_sale">Delete a sale</a></li>
<li><a class="el" href="rfc_top.html#domains_list">List of domains</a></li>
<li><a class="el" href="rfc_top.html#sales_from_domain">Sales from a domain</a></li>
</ol>
</li>
<li><a class="el" href="rfc_top.html#request_from_server_to_client">Request from the central server to client</a><ol type="a">
<li><a class="el" href="rfc_top.html#get_server_public_key_responses">Get the public key of the central server</a><ol type="i">
<li><a class="el" href="rfc_top.html#get_server_public_key_success">Success</a></li>
<li><a class="el" href="rfc_top.html#get_server_public_key_failure">Failure</a></li>
</ol>
</li>
<li><a class="el" href="rfc_top.html#sign_up_responses">Sign up</a><ol type="i">
<li><a class="el" href="rfc_top.html#sign_up_success">Success</a></li>
<li><a class="el" href="rfc_top.html#sign_up_failure">Failure</a></li>
</ol>
</li>
<li><a class="el" href="rfc_top.html#sign_in_responses">Sign in</a><ol type="i">
<li><a class="el" href="rfc_top.html#sign_in_success">Success</a></li>
<li><a class="el" href="rfc_top.html#sign_in_failure">Failure</a></li>
</ol>
</li>
<li><a class="el" href="rfc_top.html#sign_out_responses">Sign out</a><ol type="i">
<li><a class="el" href="rfc_top.html#sign_out_success">Success</a></li>
<li><a class="el" href="rfc_top.html#sign_out_failure">Failure</a></li>
</ol>
</li>
<li><a class="el" href="rfc_top.html#create_sale_responses">Create a sale</a><ol type="i">
<li><a class="el" href="rfc_top.html#create_sale_success">Success</a></li>
<li><a class="el" href="rfc_top.html#create_sale_failure">Failure</a></li>
</ol>
</li>
<li><a class="el" href="rfc_top.html#update_sale_responses">Update a sale</a><ol type="i">
<li><a class="el" href="rfc_top.html#update_sale_success">Success</a></li>
<li><a class="el" href="rfc_top.html#update_sale_failure">Failure</a></li>
</ol>
</li>
<li><a class="el" href="rfc_top.html#delete_sale_responses">Delete a sale</a><ol type="i">
<li><a class="el" href="rfc_top.html#delete_sale_success">Success</a></li>
<li><a class="el" href="rfc_top.html#delete_sale_failure">Failure</a></li>
</ol>
</li>
<li><a class="el" href="rfc_top.html#domains_list_responses">List of domains</a><ol type="i">
<li><a class="el" href="rfc_top.html#domains_list_success">Success</a></li>
<li><a class="el" href="rfc_top.html#domains_list_failure">Failure</a></li>
</ol>
</li>
<li><a class="el" href="rfc_top.html#sales_from_domain_responses">Sales from a domain</a><ol type="i">
<li><a class="el" href="rfc_top.html#sales_from_domain_success">Success</a></li>
<li><a class="el" href="rfc_top.html#sales_from_domain_failure">Failure</a></li>
</ol>
</li>
</ol>
</li>
<li><a class="el" href="rfc_top.html#serialization_deserialization">Serialization and deserialization of the requests</a></li>
</ol>
<h1><a class="anchor" id="request_from_client_to_server"></a>
2. Request from clients to the central server server</h1>
<h2><a class="anchor" id="get_server_public_key"></a>
2.1 Get the public key of the central server</h2>
<p >All exchanges between a client and the central server are encrypted. To that end, both the client and server has a public and private key pair. After exchanging public keys and performing key agreement, a shared secret is derived and used to encrypt all subsequent communications.</p>
<h3><a class="anchor" id="autotoc_md0"></a>
Request</h3>
<p ><code>REQUEST_PUBLIC_KEY_OF_CENTRAL_SERVER (client's public key)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">Client's public key   </td><td class="markdownTableBodyCenter">PublicKey   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md1"></a>
Expected responses</h3>
<p ><a class="el" href="rfc_top.html#get_server_public_key_success">`REQUEST_PUBLIC_KEY_OF_CENTRAL_SERVER_OK`</a></p>
<p ><a class="el" href="rfc_top.html#get_server_public_key_failure">`REQUEST_PUBLIC_KEY_OF_CENTRAL_SERVER_KO`</a></p>
<h3><a class="anchor" id="autotoc_md2"></a>
Sequence diagram</h3>
<p > <div class="mermaid"> 
   sequenceDiagram
note over Client: Generate public/private key
note over ClientHandler: Generate public/private key
note over ClientHandler: Accept connection from clients
note over Client: Open socket to the server
participant Client
participant ClientHandler
Client->>ClientHandler: REQUEST_PUBLIC_KEY_OF_CENTRAL_SERVER (client's public key)
note over ClientHandler: Perform key agreement
alt success
    ClientHandler->>Client: REQUEST__PUBLIC_KEY_OF_CENTRAL_SERVER_OK (server's public key)
    note over Client: Perform key agreement
else failure
    ClientHandler->>Client: REQUEST__PUBLIC_KEY_OF_CENTRAL_SERVER_KO (message)
end
  
  </div> </p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="sign_up"></a>
2.2 Sign up</h2>
<p >A client requests to sign up by sending its mail, name and password.</p>
<h3><a class="anchor" id="autotoc_md3"></a>
Â Request</h3>
<p ><code>SIGN_UP (mail, name, password)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">mail   </td><td class="markdownTableBodyCenter">String    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">name   </td><td class="markdownTableBodyCenter">String    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">password   </td><td class="markdownTableBodyCenter">String   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md4"></a>
Expected responses</h3>
<p ><a class="el" href="rfc_top.html#sign_up_success">`SIGN_UP_OK`</a></p>
<p ><a class="el" href="rfc_top.html#sign_up_failure">`SIGN_UP_KO`</a></p>
<h3><a class="anchor" id="autotoc_md5"></a>
Sequence diagram</h3>
<p > <div class="mermaid"> 
   sequenceDiagram
participant Client
participant ClientHandler
Client->>ClientHandler: SIGN_UP (mail, name, password)
alt success
    ClientHandler->>Client: SIGN_UP_OK (mail, name)
else failure
    ClientHandler->>Client: SIGN_UP_KO (message)
end  
  </div> </p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="sign_in"></a>
2.3 Sign in</h2>
<p >A client requests to sign in by its mail and password to sign in. In addition, it sends a boolean value to determine if, in case of successful sign in, the server send also the list of the dommains.</p>
<h3><a class="anchor" id="autotoc_md6"></a>
Request</h3>
<p ><code>SIGN_IN (mail, password, sendDomainList)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">mail   </td><td class="markdownTableBodyCenter">String    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">password   </td><td class="markdownTableBodyCenter">String    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">sendDomainList   </td><td class="markdownTableBodyCenter">Boolean   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md7"></a>
Expected responses</h3>
<p ><a class="el" href="rfc_top.html#sign_in_success">`SIGN_IN_OK`</a></p>
<p ><a class="el" href="rfc_top.html#sign_in_failure">`SIGN_IN_KO`</a></p>
<h3><a class="anchor" id="autotoc_md8"></a>
Sequence diagram</h3>
<p > <div class="mermaid"> 
   sequenceDiagram
participant Client
participant ClientHandler
Client->>ClientHandler: SIGN_IN (mail, name, password)
alt success
    opt Send domain list
        ClientHandler->>Client: DOMAINS_LIST_OK (domains)
    end
    ClientHandler->>Client: SIGN_IN_OK (mail, name)
else failure
    ClientHandler->>Client: SIGN_IN_KO (message)
end  
  </div> </p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="sign_out"></a>
2.4 Sign out</h2>
<p >A client just have to notify the server that he signs out.</p>
<h3><a class="anchor" id="autotoc_md9"></a>
Request</h3>
<p ><code>SIGN_OUT</code></p>
<h3><a class="anchor" id="autotoc_md10"></a>
Expected responses</h3>
<p ><a class="el" href="rfc_top.html#sign_out_success">`SIGN_OUT_OK`</a></p>
<p ><a class="el" href="rfc_top.html#sign_out_failure">`SIGN_OUT_KO`</a></p>
<h3><a class="anchor" id="autotoc_md11"></a>
Sequence diagram</h3>
<p > <div class="mermaid"> 
   sequenceDiagram
participant Client
participant ClientHandler
Client->>ClientHandler: SIGN_OUT (mail, name, password)
alt success
    ClientHandler->>Client: SIGN_OUT_OK
else failure
    ClientHandler->>Client: SIGN_OUT_KO (message)
end  
  </div> </p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="create_sale"></a>
2.5 Create a sale</h2>
<p >A client has to send the domain, the name, the content and the price for the new sale.</p>
<h3><a class="anchor" id="autotoc_md12"></a>
Request</h3>
<p ><code>CREATE_SALE (domain, title, content, price)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">domain   </td><td class="markdownTableBodyCenter">Domain    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">title   </td><td class="markdownTableBodyCenter">String    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">content   </td><td class="markdownTableBodyCenter">String    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">price   </td><td class="markdownTableBodyCenter">int   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md13"></a>
Expected responses</h3>
<p ><a class="el" href="rfc_top.html#create_sale_success">`CREATE_SALE_OK`</a></p>
<p ><a class="el" href="rfc_top.html#create_sale_failure">`CREATE_SALE_KO`</a></p>
<h3><a class="anchor" id="autotoc_md14"></a>
Sequence diagram</h3>
<p > <div class="mermaid"> 
   sequenceDiagram
participant Client
participant ClientHandler
Client->>ClientHandler: CREATE_SALE (domain, title, content, price)
alt success
    ClientHandler->>Client: CREATE_SALE_OK (title)
else failure
    ClientHandler->>Client: CREATE_SALE_KO (message)
end  
  </div> </p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="update_sale"></a>
2.6 Update a sale</h2>
<p >A client has to send the new title, the new content, the new price of the sale and the id of the sale being updated. The domain can't be changed.</p>
<h3><a class="anchor" id="autotoc_md15"></a>
Request</h3>
<p ><code>UPDATE_SALE (title, content, price, id)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">title   </td><td class="markdownTableBodyCenter">String    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">content   </td><td class="markdownTableBodyCenter">String    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">price   </td><td class="markdownTableBodyCenter">int    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">id   </td><td class="markdownTableBodyCenter">int   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md16"></a>
Expected responses</h3>
<p ><a class="el" href="rfc_top.html#update_sale_success">`UPDATE_SALE_OK`</a></p>
<p ><a class="el" href="rfc_top.html#update_sale_failure">`UPDATE_SALE_KO`</a></p>
<h3><a class="anchor" id="autotoc_md17"></a>
Sequence diagram</h3>
<p > <div class="mermaid"> 
   sequenceDiagram
participant Client
participant ClientHandler
Client->>ClientHandler: UPDATE_SALE (title, content, price, id)
alt success
    ClientHandler->>Client: UPDATE_SALE_OK
else failure
    ClientHandler->>Client: UPDATE_SALE_KO (message)
end  
  </div> </p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="delete_sale"></a>
2.7 Delete a sale</h2>
<p >A client has to send the id of the sale he wants to delete. A client can delete a sale only if he's its owner.</p>
<h3><a class="anchor" id="autotoc_md18"></a>
Request</h3>
<p ><code>DELETE_SALE (id)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">id   </td><td class="markdownTableBodyCenter">int   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md19"></a>
Expected responses</h3>
<p ><a class="el" href="rfc_top.html#delete_sale_success">`DELETE_SALE_OK`</a></p>
<p ><a class="el" href="rfc_top.html#delete_sale_failure">`DELETE_SALE_KO`</a></p>
<h3><a class="anchor" id="autotoc_md20"></a>
Sequence diagram</h3>
<p > <div class="mermaid"> 
   sequenceDiagram
participant Client
participant ClientHandler
Client->>ClientHandler: REMOVE_SALE (id)
alt success
    ClientHandler->>Client: REMOVE_SALE_OK
else failure
    ClientHandler->>Client: REMOVE_SALE_KO (message)
end  
  </div> </p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="domains_list"></a>
2.8 List of domains</h2>
<p >A client just have to notify the server to the server that he wants the list of the domains.</p>
<h3><a class="anchor" id="autotoc_md21"></a>
Request</h3>
<p ><code>DOMAINS_LIST</code></p>
<h3><a class="anchor" id="autotoc_md22"></a>
Expected responses</h3>
<p ><a class="el" href="rfc_top.html#domains_list_success">`DOMAINS_LIST_OK`</a></p>
<p ><a class="el" href="rfc_top.html#domains_list_failure">`DOMAINS_LIST_KO`</a></p>
<h3><a class="anchor" id="autotoc_md23"></a>
Sequence diagram</h3>
<p > <div class="mermaid"> 
   sequenceDiagram
participant Client
participant ClientHandler
Client->>ClientHandler: DOMAINS_LIST
alt success
    ClientHandler->>Client: DOMAINS_LIST_OK (domains)
else failure
    ClientHandler->>Client: DOMAINS_LIST_KO (message)
end  
  </div> </p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="sales_from_domain"></a>
2.9 Sales from a domain</h2>
<p >A client has to send the domains from which he wants to retrieve the sales.</p>
<h3><a class="anchor" id="autotoc_md24"></a>
Request</h3>
<p ><code>SALES_FROM_DOMAIN (domain)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">domain   </td><td class="markdownTableBodyCenter">Domain   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md25"></a>
Expected responses</h3>
<p ><a class="el" href="rfc_top.html#sales_from_domain_success">`SALE_FROM_DOMAIN_OK`</a></p>
<p ><a class="el" href="rfc_top.html#sales_from_domain_failure">`SALE_FROM_DOMAIN_KO`</a></p>
<h3><a class="anchor" id="autotoc_md26"></a>
Sequence diagram</h3>
<p > <div class="mermaid"> 
   sequenceDiagram
participant Client
participant ClientHandler
Client->>ClientHandler: SALE_FROM_DOMAIN (domain)
alt success
    ClientHandler->>Client: SALE_FROM_DOMAIN_OK (sales)
else failure
    ClientHandler->>Client: SALE_FRON_DOMAIN_KO (message)
end  
  </div> </p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h1><a class="anchor" id="request_from_server_to_client"></a>
3. Request from the central server to client</h1>
<h2><a class="anchor" id="get_server_public_key_responses"></a>
3.1 Get the public key of the central server</h2>
<h2><a class="anchor" id="get_server_public_key_success"></a>
3.1.1 Success</h2>
<p >The server sends the public key to the client.</p>
<h3><a class="anchor" id="autotoc_md27"></a>
Request</h3>
<p ><code>REQUEST_PUBLIC_KEY_OF_CENTRAL_SERVER_OK (server's public key)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">Server's public key   </td><td class="markdownTableBodyCenter">PublicKey   </td></tr>
</table>
<p >Answer to request <a class="el" href="rfc_top.html#get_server_public_key">`REQUEST_PUBLIC_KEY_OF_CENTRAL_SERVER`</a>.</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="get_server_public_key_failure"></a>
3.1.2 Failure</h2>
<p >The server sends an error message to the client.</p>
<p >Reason of failure:</p><ul>
<li>the server process the incoming request but don't answer to them.</li>
</ul>
<h3><a class="anchor" id="autotoc_md28"></a>
Request</h3>
<p ><code>REQUEST_PUBLIC_KEY_OF_CENTRAL_SERVER_KO (message)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">Message   </td><td class="markdownTableBodyCenter">String   </td></tr>
</table>
<p >Answer to request <a class="el" href="rfc_top.html#get_server_public_key">`REQUEST_PUBLIC_KEY_OF_CENTRAL_SERVER`</a>.</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="sign_up_responses"></a>
3.2 Sign up</h2>
<h2><a class="anchor" id="sign_up_success"></a>
3.2.1 Success</h2>
<p >In case of sign up success, the server sends a confirmation of sign up with the mail and the name of the client.</p>
<h3><a class="anchor" id="autotoc_md29"></a>
Request</h3>
<p ><code>SIGN_UP_OK (mail, name)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">mail   </td><td class="markdownTableBodyCenter">String    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">name   </td><td class="markdownTableBodyCenter">String   </td></tr>
</table>
<p >Answer to request `SIGN_UP`.</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="sign_up_failure"></a>
3.2.2 Failure</h2>
<p >In case of sign up failure, the server sends a message to the client indicating the error.</p>
<p >Reason of failures:</p><ul>
<li>the server process the incoming request but don't answer to them;</li>
<li>the mail is not a valid format;</li>
<li>the mail is already taken;</li>
<li>the name is not valid.</li>
</ul>
<h3><a class="anchor" id="autotoc_md30"></a>
Request</h3>
<p ><code>SIGN_UP_KO (message)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">message   </td><td class="markdownTableBodyCenter">String   </td></tr>
</table>
<p >Answer to request <a class="el" href="rfc_top.html#sign_up">`SIGN_UP`</a>.</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h1><a class="anchor" id="sign_in_responses"></a>
3.3 Sign in</h1>
<h2><a class="anchor" id="sign_in_success"></a>
3.3.1 Success</h2>
<p >In case of sign in success, the server sends a confirmation of sign in with the name of the client.</p>
<h3><a class="anchor" id="autotoc_md31"></a>
Request</h3>
<p ><code>SIGN_IN_OK (name)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">name   </td><td class="markdownTableBodyCenter">String   </td></tr>
</table>
<p >Answer to request <a class="el" href="rfc_top.html#sign_in">`SIGN_IN`</a>.</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="sign_in_failure"></a>
3.3.2 Failure</h2>
<p >In case of sign in failure, the server sends an error message to the client.</p>
<p >Reason of failure:</p><ul>
<li>the server process the incoming request but don't answer to them;</li>
<li>the mail is not registered;</li>
<li>the mail password is invalid.</li>
</ul>
<h3><a class="anchor" id="autotoc_md32"></a>
Request</h3>
<p ><code>SIGN_IN_KO (message)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">message   </td><td class="markdownTableBodyCenter">String   </td></tr>
</table>
<p >Answer to request <a class="el" href="rfc_top.html#sign_in">`SIGN_IN`</a>.</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="sign_out_responses"></a>
3.4 Sign out</h2>
<h2><a class="anchor" id="sign_out_success"></a>
3.4.1 Success</h2>
<p >The server send a confirmation of sign out.</p>
<h3><a class="anchor" id="autotoc_md33"></a>
Request</h3>
<p ><code>SIGN_OUT_OK</code></p>
<p >Answer to request <a class="el" href="rfc_top.html#sign_out">`SIGN_OUT`</a>.</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="sign_out_failure"></a>
3.4.2 Failure</h2>
<p >The server send an error message to the client.</p>
<p >Reason of failure:</p><ul>
<li>the server process the incoming request but don't answer to them.</li>
</ul>
<h3><a class="anchor" id="autotoc_md34"></a>
Request</h3>
<p ><code>SIGN_OUT_KO (message)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">message   </td><td class="markdownTableBodyCenter">String   </td></tr>
</table>
<p >Answer to request `sign_out "`SIGN_OUT".</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h1><a class="anchor" id="create_sale_responses"></a>
3.5 Create a sale</h1>
<h2><a class="anchor" id="create_sale_success"></a>
3.5.1 Success</h2>
<p >The server send the confirmation of the creation of the sale with the title of the sale.</p>
<h3><a class="anchor" id="autotoc_md35"></a>
Request</h3>
<p ><code>CREATE_SALE_OK (title)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">Title   </td><td class="markdownTableBodyCenter">String   </td></tr>
</table>
<p >Answer to request <a class="el" href="rfc_top.html#create_sale">`CREATE_SALE`</a>.</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="create_sale_failure"></a>
3.5.2 Failure</h2>
<p >The server send an error message to the client.</p>
<p >Reason of failure:</p><ul>
<li>the server process the incoming request but don't answer to them.</li>
</ul>
<h3><a class="anchor" id="autotoc_md36"></a>
Â Request</h3>
<p ><code>CREATE_SALE_KO (message)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">Message   </td><td class="markdownTableBodyCenter">String   </td></tr>
</table>
<p >Answer to request <a class="el" href="rfc_top.html#create_sale">`CREATE_SALE`</a>.</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h1><a class="anchor" id="update_sale_responses"></a>
3.6 Update a sale</h1>
<h2><a class="anchor" id="update_sale_success"></a>
3.6.1 Success</h2>
<p >The server send the confirmation of the update of the sale.</p>
<h3><a class="anchor" id="autotoc_md37"></a>
Request</h3>
<p ><code>UPDATE_SALE_OK</code></p>
<p >Answer to request <a class="el" href="rfc_top.html#update_sale">`UPDATE_SALE`</a>.</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="update_sale_failure"></a>
3.6.2 Failure</h2>
<p >The server send an error message to the client.</p>
<p >Reason of failure:</p><ul>
<li>the server process the incoming request but don't answer to them.</li>
</ul>
<h3><a class="anchor" id="autotoc_md38"></a>
Request</h3>
<p ><code>UPDATE_SALE_KO (message)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">Message   </td><td class="markdownTableBodyCenter">String   </td></tr>
</table>
<p >Answer to request <a class="el" href="rfc_top.html#update_sale">`UPDATE_SALE`</a>.</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h1><a class="anchor" id="delete_sale_responses"></a>
3.7 Delete a sale</h1>
<h2><a class="anchor" id="delete_sale_success"></a>
3.7.1 Success</h2>
<p >The server send the confirmation of the deletion of the sale.</p>
<h3><a class="anchor" id="autotoc_md39"></a>
Request</h3>
<p ><code>DELETE_SALE_OK</code></p>
<p >Answer to request <a class="el" href="rfc_top.html#delete_sale">`DELETE_SALE`</a>.</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="delete_sale_failure"></a>
3.7.2 Failure</h2>
<p >The server send an error message to the client.</p>
<p >Reason of failure:</p><ul>
<li>the server process the incoming request but don't answer to them.</li>
</ul>
<h3><a class="anchor" id="autotoc_md40"></a>
Request</h3>
<p ><code>DELETE_SALE_KO (message)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">Message   </td><td class="markdownTableBodyCenter">String   </td></tr>
</table>
<p >Answer to request <a class="el" href="rfc_top.html#delete_sale">`DELETE_SALE`</a>.</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h1><a class="anchor" id="domains_list_responses"></a>
3.8 List of domains</h1>
<h2><a class="anchor" id="domains_list_success"></a>
3.8.1 Success</h2>
<p >The server send the list of the domains.</p>
<h3><a class="anchor" id="autotoc_md41"></a>
Request</h3>
<p ><code>DOMAIN_LIST_OK (domains)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">domains   </td><td class="markdownTableBodyCenter">Domains[]   </td></tr>
</table>
<p >Answer to request <a class="el" href="rfc_top.html#domains_list">`DOMAINS_LIST`</a>.</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="domains_list_failure"></a>
3.8.2 Failure</h2>
<p >The server send an error message to the client.</p>
<h3><a class="anchor" id="autotoc_md42"></a>
Request</h3>
<p >Reason of failure:</p><ul>
<li>the server process the incoming request but don't answer to them.</li>
</ul>
<p ><code>DOMAIN_LIST_KO (message)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">Message   </td><td class="markdownTableBodyCenter">String   </td></tr>
</table>
<p >Answer to request <a class="el" href="rfc_top.html#domains_list">`DOMAINS_LIST`</a>.</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h1><a class="anchor" id="sales_from_domain_responses"></a>
3.9 Sales from a domain</h1>
<h2><a class="anchor" id="sales_from_domain_success"></a>
3.9.1 Success</h2>
<p >The server send the list of the sales on the specific domain.</p>
<h3><a class="anchor" id="autotoc_md43"></a>
Request</h3>
<p ><code>SALE_FROM_DOMAIN_OK (sales)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">sales   </td><td class="markdownTableBodyCenter">Annonce[]   </td></tr>
</table>
<p >Answer to request <a class="el" href="rfc_top.html#sales_from_domain">`SALE_FROM_DOMAIN`</a>.</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h2><a class="anchor" id="sales_from_domain_failure"></a>
3.9.2 Failure</h2>
<p >The server send an error message to the client.</p>
<h3><a class="anchor" id="autotoc_md44"></a>
Request</h3>
<p >Reason of failure:</p><ul>
<li>the server process the incoming request but don't answer to them.</li>
</ul>
<p ><code>SALE_FROM_DOMAIN_KO (message)</code></p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Variable   </th><th class="markdownTableHeadCenter">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">Message   </td><td class="markdownTableBodyCenter">String   </td></tr>
</table>
<p >Answer to request <a class="el" href="rfc_top.html#sales_from_domain">`SALE_FROM_DOMAIN`</a>.</p>
<p ><a class="el" href="rfc_top.html">Back to top</a></p>
<h1><a class="anchor" id="serialization_deserialization"></a>
4. Serialization and deserialization of the requests</h1>
<p >The following diagram shows the serialization and deseriialization of a request. It holds when the request is encrypted, that is everytime except for the request <code>REQUEST_PUBLIC_KEY_OF_CENTRAL_SERVER</code> and their associated responses <code>REQUEST_PUBLIC_KEY_OF_CENTRAL_SERVER_OK</code> and <code>REQUEST_PUBLIC_KEY_OF_CENTRAL_SERVER_KO</code>.</p>
<p > <div class="mermaid"> 
   sequenceDiagram
note over Client: Creation of a request R
note over Client: Generation of the initialization vector IV
participant Client
participant ClientHandler
Client->>ClientHandler: (bytesArray(IV).length + bytesArray(R).length, bytesArray(IV), bytesArray(R))
Note over ClientHandler: Extract the initialization vector IV
Note over ClientHandler: Retrieve the request R  
  </div> </p>
<p ><a class="el" href="rfc_top.html">Back to top</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.8-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
<script>
  mermaid.initialize({
    startOnLoad: true,
    theme: 'base', 
    themeVariables: {
      primaryColor: '#f4f4ff',
      secondaryColor: 'rgba(244,244,255,0.9)',
      tertiaryColor: '#F9FAFC',
    },
  });
</script>
</html>
